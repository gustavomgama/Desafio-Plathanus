<div class="bg-white overflow-hidden">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16">
    <div class="text-center">
      <div class="mb-8">
        <div class="badge-warning inline-block mb-6 text-sm font-semibold uppercase tracking-wider">
          Premium Collection
        </div>
        <h1 class="text-5xl md:text-6xl font-bold mb-6 text-brand-dark leading-tight">
          Furnished <span class="text-brand-accent">Properties</span><br>
          <span class="text-4xl md:text-5xl text-brand-secondary">For Modern Living</span>
        </h1>
        <p class="mt-6 max-w-2xl mx-auto text-lg leading-relaxed text-brand-secondary">
          Discover our curated selection of premium furnished apartments. Each property combines contemporary design with unmatched comfort and convenience.
        </p>
      </div>

      <div class="flex items-center justify-center gap-8 mt-12">
        <div class="text-center">
          <div class="text-3xl font-bold text-brand-dark">
            <%= @properties.count %>
          </div>
          <div class="text-sm font-medium text-brand-secondary uppercase tracking-wider">
            Properties
          </div>
        </div>
        <div class="w-px h-12 bg-gray-300"></div>
        <div class="text-center">
          <div class="text-3xl font-bold text-brand-dark">
            <%= @properties.joins(:photos).group('properties.id').count.values.sum %>
          </div>
          <div class="text-sm font-medium text-brand-secondary uppercase tracking-wider">
            Photos
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="bg-brand-light py-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <% if @properties.any? %>
      <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
        <% @properties.each do |property| %>
          <%
            cover_photo = property.cover_photo
            has_cover = property.has_cover_photo?
            photo_count = property.photos.count
          %>
          <div class="property-card">
            <div class="relative h-64 overflow-hidden bg-gradient-secondary">
              <% if cover_photo %>
                <div class="absolute inset-0 bg-gradient-primary flex items-center justify-center">
                  <div class="text-center text-white">
                    <div class="text-6xl mb-4">üè†</div>
                    <div class="badge bg-brand-accent bg-opacity-20 text-brand-accent border-brand-accent">
                      Cover Photo
                    </div>
                    <p class="text-xs opacity-75 mt-2">
                      Position <%= cover_photo.position %> of <%= photo_count %>
                    </p>
                  </div>
                </div>
              <% else %>
                <div class="absolute inset-0 bg-brand-light flex items-center justify-center">
                  <div class="text-center text-brand-secondary">
                    <div class="text-5xl mb-3">üì∑</div>
                    <p class="text-sm font-medium">No photos yet</p>
                  </div>
                </div>
              <% end %>

              <% if photo_count > 0 %>
                <div class="absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-semibold text-white bg-black bg-opacity-70">
                  <%= pluralize(photo_count, 'photo') %>
                </div>
              <% end %>

              <div class="absolute bottom-0 left-6 w-12 h-0.5 bg-brand-accent"></div>
            </div>

            <div class="p-6">
              <div class="mb-4">
                <h3 class="text-xl font-semibold mb-2 text-brand-dark">
                  <%= link_to property.name, property_path(property),
                      class: "hover:text-brand-primary transition-colors" %>
                </h3>

                <div class="flex items-center gap-6 mb-4">
                  <div class="flex items-center gap-2 text-brand-secondary">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-sm font-medium"><%= photo_count %></span>
                  </div>

                  <% if has_cover %>
                    <div class="flex items-center gap-2 text-brand-accent">
                      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                      </svg>
                      <span class="text-sm font-semibold">Featured</span>
                    </div>
                  <% end %>
                </div>

                <p class="text-xs font-medium text-brand-secondary uppercase tracking-wide">
                  Added <%= time_ago_in_words(property.created_at) %> ago
                </p>
              </div>

              <div class="pt-4 border-t border-gray-100">
                <%= link_to property_path(property),
                    class: "btn-primary w-full group" do %>
                  <span>View Property</span>
                  <svg class="ml-2 -mr-1 w-4 h-4 transition-transform group-hover:translate-x-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-20">
        <div class="text-8xl mb-6">üèòÔ∏è</div>
        <h3 class="text-2xl font-bold mb-4 text-brand-dark">
          No Properties Available
        </h3>
        <p class="text-lg mb-8 max-w-md mx-auto text-brand-secondary">
          Our collection is currently being curated. Check back soon for premium furnished properties.
        </p>
        <div class="inline-block px-6 py-3 rounded-lg bg-brand-light border border-gray-300">
          <code class="text-sm font-mono text-brand-secondary">rails db:seed</code>
        </div>
      </div>
    <% end %>
  </div>
</div>
